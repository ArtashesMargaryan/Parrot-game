!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){var e={exports:{}};return t(e,e.exports),e.exports}var a=function(t){return t&&t.Math==Math&&t},u=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof i&&i)||function(){return this}()||Function("return this")(),s=function(t){try{return!!t()}catch(t){return!0}},l=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h={f:f&&!c.call({1:2},1)?function(t){var e=f(this,t);return!!e&&e.enumerable}:c},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d={}.toString,y=function(t){return d.call(t).slice(8,-1)},g="".split,v=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==y(t)?g.call(t,""):Object(t)}:Object,x=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return v(x(t))},w=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_=function(t,e){if(!w(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!w(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},S={}.hasOwnProperty,T=function(t,e){return S.call(t,e)},b=u.document,C=w(b)&&w(b.createElement),P=!l&&!s((function(){return 7!=Object.defineProperty((t="div",C?b.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),L=Object.getOwnPropertyDescriptor,D={f:l?L:function(t,e){if(t=m(t),e=_(e,!0),P)try{return L(t,e)}catch(t){}if(T(t,e))return p(!h.f.call(t,e),t[e])}},E=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t},O=Object.defineProperty,k={f:l?O:function(t,e,n){if(E(t),e=_(e,!0),E(n),P)try{return O(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},M=l?function(t,e,n){return k.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},j=function(t,e){try{M(u,t,e)}catch(n){u[t]=e}return e},A="__core-js_shared__",G=u[A]||j(A,{}),F=Function.toString;"function"!=typeof G.inspectSource&&(G.inspectSource=function(t){return F.call(t)});var R,I,N,V,H=G.inspectSource,z=u.WeakMap,B="function"==typeof z&&/native code/.test(H(z)),q=o((function(t){(t.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),U=0,W=Math.random(),J=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++U+W).toString(36)},K=q("keys"),X={},Y=u.WeakMap;if(B){var Q=G.state||(G.state=new Y),Z=Q.get,$=Q.has,tt=Q.set;R=function(t,e){return e.facade=t,tt.call(Q,t,e),e},I=function(t){return Z.call(Q,t)||{}},N=function(t){return $.call(Q,t)}}else{var et=K[V="state"]||(K[V]=J(V));X[et]=!0,R=function(t,e){return e.facade=t,M(t,et,e),e},I=function(t){return T(t,et)?t[et]:{}},N=function(t){return T(t,et)}}var nt={set:R,get:I,has:N,enforce:function(t){return N(t)?I(t):R(t,{})},getterFor:function(t){return function(e){var n;if(!w(e)||(n=I(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},rt=o((function(t){var e=nt.get,n=nt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,s=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||T(i,"name")||M(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==u?(s?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=i:M(t,e,i)):l?t[e]=i:j(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||H(this)}))})),it=u,ot=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?ot(it[t])||ot(u[t]):it[t]&&it[t][e]||u[t]&&u[t][e]},ut=Math.ceil,st=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?st:ut)(t)},ct=Math.min,ft=function(t){return t>0?ct(lt(t),9007199254740991):0},ht=Math.max,pt=Math.min,dt=function(t,e){var n=lt(t);return n<0?ht(n+e,0):pt(n,e)},yt=function(t){return function(e,n,r){var i,o=m(e),a=ft(o.length),u=dt(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}},gt={includes:yt(!0),indexOf:yt(!1)},vt=gt.indexOf,xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(t){return function(t,e){var n,r=m(t),i=0,o=[];for(n in r)!T(X,n)&&T(r,n)&&o.push(n);for(;e.length>i;)T(r,n=e[i++])&&(~vt(o,n)||o.push(n));return o}(t,xt)}},wt={f:Object.getOwnPropertySymbols},_t=at("Reflect","ownKeys")||function(t){var e=mt.f(E(t)),n=wt.f;return n?e.concat(n(t)):e},St=function(t,e){for(var n=_t(e),r=k.f,i=D.f,o=0;o<n.length;o++){var a=n[o];T(t,a)||r(t,a,i(e,a))}},Tt=/#|\.prototype\./,bt=function(t,e){var n=Pt[Ct(t)];return n==Dt||n!=Lt&&("function"==typeof e?s(e):!!e)},Ct=bt.normalize=function(t){return String(t).replace(Tt,".").toLowerCase()},Pt=bt.data={},Lt=bt.NATIVE="N",Dt=bt.POLYFILL="P",Et=bt,Ot=D.f,kt=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,c=t.stat;if(n=l?u:c?u[s]||j(s,{}):(u[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Ot(n,r))&&a.value:n[r],!Et(l?r:s+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;St(o,i)}(t.sham||i&&i.sham)&&M(o,"sham",!0),rt(n,r,o,t)}},Mt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},jt=[].slice,At={},Gt=function(t,e,n){if(!(e in At)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";At[e]=Function("C,a","return new C("+r.join(",")+")")}return At[e](t,n)};kt({target:"Function",proto:!0},{bind:Function.bind||function(t){var e=Mt(this),n=jt.call(arguments,1),r=function(){var i=n.concat(jt.call(arguments));return this instanceof r?Gt(e,i.length,i):e.apply(t,i)};return w(e.prototype)&&(r.prototype=e.prototype),r}});var Ft=function(){function e(n){t(this,e),r(this,"_gl",void 0),r(this,"_drawPasses",0),r(this,"_originGLDrawElements",void 0),this._gl=n,this._originGLDrawElements=n.drawElements,n.drawElements=this._patchGLDrawElements.bind(this),console.log("[pixi-stats] GL was patched!")}return n(e,[{key:"reset",value:function(){this._drawPasses=0}},{key:"_patchGLDrawElements",value:function(t,e,n,r){this._drawPasses++,this._originGLDrawElements.call(this._gl,t,e,n,r)}},{key:"drawPasses",get:function(){return this._drawPasses}}]),e}(),Rt=function(t){return Object(x(t))},It=Array.isArray||function(t){return"Array"==y(t)},Nt=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),Vt=Nt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ht=q("wks"),zt=u.Symbol,Bt=Vt?zt:zt&&zt.withoutSetter||J,qt=function(t){return T(Ht,t)||(Nt&&T(zt,t)?Ht[t]=zt[t]:Ht[t]=Bt("Symbol."+t)),Ht[t]},Ut=qt("species"),Wt=function(t,e){var n;return It(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!It(n.prototype)?w(n)&&null===(n=n[Ut])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Jt=[].push,Kt=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,u=5==t||o;return function(s,l,c,f){for(var h,p,d=Rt(s),y=v(d),g=function(t,e,n){if(Mt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}(l,c,3),x=ft(y.length),m=0,w=f||Wt,_=e?w(s,x):n||a?w(s,0):void 0;x>m;m++)if((u||m in y)&&(p=g(h=y[m],m,d),t))if(e)_[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:Jt.call(_,h)}else switch(t){case 4:return!1;case 7:Jt.call(_,h)}return o?-1:r||i?i:_}},Xt={forEach:Kt(0),map:Kt(1),filter:Kt(2),some:Kt(3),every:Kt(4),find:Kt(5),findIndex:Kt(6),filterOut:Kt(7)},Yt=function(t,e){var n=[][t];return!!n&&s((function(){n.call(null,e||function(){throw 1},1)}))},Qt=Object.defineProperty,Zt={},$t=function(t){throw t},te=function(t,e){if(T(Zt,t))return Zt[t];e||(e={});var n=[][t],r=!!T(e,"ACCESSORS")&&e.ACCESSORS,i=T(e,0)?e[0]:$t,o=T(e,1)?e[1]:void 0;return Zt[t]=!!n&&!s((function(){if(r&&!l)return!0;var t={length:-1};r?Qt(t,1,{enumerable:!0,get:$t}):t[1]=1,n.call(t,i,o)}))},ee=Xt.forEach,ne=Yt("forEach"),re=te("forEach"),ie=ne&&re?[].forEach:function(t){return ee(this,t,arguments.length>1?arguments[1]:void 0)};kt({target:"Array",proto:!0,forced:[].forEach!=ie},{forEach:ie});var oe=gt.indexOf,ae=[].indexOf,ue=!!ae&&1/[1].indexOf(1,-0)<0,se=Yt("indexOf"),le=te("indexOf",{ACCESSORS:!0,1:0});kt({target:"Array",proto:!0,forced:ue||!se||!le},{indexOf:function(t){return ue?ae.apply(this,arguments)||0:oe(this,t,arguments.length>1?arguments[1]:void 0)}});var ce,fe,he=function(t,e,n){var r=_(e);r in t?k.f(t,r,p(0,n)):t[r]=n},pe=at("navigator","userAgent")||"",de=u.process,ye=de&&de.versions,ge=ye&&ye.v8;ge?fe=(ce=ge.split("."))[0]+ce[1]:pe&&(!(ce=pe.match(/Edge\/(\d+)/))||ce[1]>=74)&&(ce=pe.match(/Chrome\/(\d+)/))&&(fe=ce[1]);var ve,xe=fe&&+fe,me=qt("species"),we=(ve="splice",xe>=51||!s((function(){var t=[];return(t.constructor={})[me]=function(){return{foo:1}},1!==t[ve](Boolean).foo}))),_e=te("splice",{ACCESSORS:!0,0:0,1:2}),Se=Math.max,Te=Math.min,be=9007199254740991,Ce="Maximum allowed length exceeded";kt({target:"Array",proto:!0,forced:!we||!_e},{splice:function(t,e){var n,r,i,o,a,u,s=Rt(this),l=ft(s.length),c=dt(t,l),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=l-c):(n=f-2,r=Te(Se(lt(e),0),l-c)),l+n-r>be)throw TypeError(Ce);for(i=Wt(s,r),o=0;o<r;o++)(a=c+o)in s&&he(i,o,s[a]);if(i.length=r,n<r){for(o=c;o<l-r;o++)u=o+n,(a=o+r)in s?s[u]=s[a]:delete s[u];for(o=l;o>l-r+n;o--)delete s[o-1]}else if(n>r)for(o=l-r;o>c;o--)u=o+n-1,(a=o+r-1)in s?s[u]=s[a]:delete s[u];for(o=0;o<n;o++)s[o+c]=arguments[o+2];return s.length=l-r+n,i}});for(var Pe in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Le=u[Pe],De=Le&&Le.prototype;if(De&&De.forEach!==ie)try{M(De,"forEach",ie)}catch(t){De.forEach=ie}}var Ee=function(){function e(n,i){t(this,e),r(this,"_gl",void 0),r(this,"_originGLCreateTexture",void 0),r(this,"_originGLDeleteTexture",void 0),r(this,"_maxTexturesCount",0),r(this,"_createdTextures",[]),this._gl=n,this._originGLCreateTexture=n.createTexture,this._originGLDeleteTexture=n.deleteTexture,n.createTexture=this._patchGLCreateTexture.bind(this),n.deleteTexture=this._patchGLDeleteTexture.bind(this),console.log("[pixi-stats] Texture was patched!"),this._collectUsedTextures(i)}return n(e,[{key:"reset",value:function(){this._createdTextures.length=0,this._maxTexturesCount=0}},{key:"_registerTexture",value:function(t){this._createdTextures.push(t),this._maxTexturesCount=Math.max(this._createdTextures.length,this._maxTexturesCount)}},{key:"_collectUsedTextures",value:function(t){var e=this;t.forEach((function(t){t._glTextures.forEach((function(t){e._registerTexture(t.texture)}))})),console.log("[pixi-stats] Collect used textures:",this._createdTextures.length)}},{key:"_patchGLCreateTexture",value:function(){var t=this._originGLCreateTexture.call(this._gl);return this._registerTexture(t),t}},{key:"_patchGLDeleteTexture",value:function(t){var e=this._createdTextures.indexOf(t);e>-1&&this._createdTextures.splice(e,1),this._originGLDeleteTexture.call(this._gl,t)}},{key:"currentTextureCount",get:function(){return this._createdTextures.length}},{key:"maxTexturesCount",get:function(){return this._maxTexturesCount}}]),e}(),Oe=function(){function e(n){t(this,e),r(this,"_lastDrawCalls",-1),r(this,"_maxDeltaDrawCalls",-1),r(this,"_glStats",void 0),r(this,"_textureStats",void 0),r(this,"_application",void 0),this._application=n;var i=this._application.renderer,o=i.gl,a=i.texture;o&&a&&(this._glStats=new Ft(o),this._textureStats=new Ee(o,a.managedTextures),this._lastDrawCalls=this.drawCalls)}return n(e,[{key:"reset",value:function(){this._maxDeltaDrawCalls=-1,this._lastDrawCalls=-1,this._glStats.reset(),this._textureStats.reset()}},{key:"drawCalls",get:function(){return this._glStats?this._glStats.drawPasses:0}},{key:"maxDeltaDrawCalls",get:function(){return this._maxDeltaDrawCalls}},{key:"deltaDrawCalls",get:function(){var t=this.drawCalls-this._lastDrawCalls;return this._lastDrawCalls=this.drawCalls,this._maxDeltaDrawCalls=Math.max(this._maxDeltaDrawCalls,t),t}},{key:"maxTextureCount",get:function(){return this._textureStats?this._textureStats.maxTexturesCount:0}},{key:"texturesCount",get:function(){return this._textureStats?this._textureStats.currentTextureCount:0}}]),e}(),ke=o((function(t,e){t.exports=function(){var t=function(){function e(t){return i.appendChild(t.dom),t}function n(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";r=t}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,u=0,s=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){u++;var t=(performance||Date).now();if(l.update(t-o,200),t>a+1e3&&(s.update(1e3*u/(t-a),100),a=t,u=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:n}};return t.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),u=80*a,s=48*a,l=3*a,c=2*a,f=3*a,h=15*a,p=74*a,d=30*a,y=document.createElement("canvas");y.width=u,y.height=s,y.style.cssText="width:80px;height:48px";var g=y.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,u,s),g.fillStyle=e,g.fillText(t,l,c),g.fillRect(f,h,p,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f,h,p,d),{dom:y,update:function(s,v){r=Math.min(r,s),i=Math.max(i,s),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,u,h),g.fillStyle=e,g.fillText(o(s)+" "+t+" ("+o(r)+"-"+o(i)+")",l,c),g.drawImage(y,f+a,h,p-a,d,f,h,p-a,d),g.fillRect(f+p-a,h,a,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f+p-a,h,a,o((1-s/v)*d))}}},t}()})),Me=function(){function e(n){t(this,e),r(this,"_stats",new ke),r(this,"_pixiStats",void 0),r(this,"_drawCallsPanel",void 0),r(this,"_texturesCountPanel",void 0),this._pixiStats=n,this._drawCallsPanel=this.addPanel(new ke.Panel("DC:","#FFFA9A","#38372A")),this._texturesCountPanel=this.addPanel(new ke.Panel("T:","#FFF2DF","#B27D35")),this.showPanel(3)}return n(e,[{key:"showPanel",value:function(t){this._stats.showPanel(t)}},{key:"begin",value:function(){this._stats.begin()}},{key:"end",value:function(){return this._stats.end()}},{key:"update",value:function(){this._drawCallsPanel.update(this._pixiStats.deltaDrawCalls,Math.max(50,this._pixiStats.maxDeltaDrawCalls)),this._texturesCountPanel.update(this._pixiStats.texturesCount,Math.max(20,this._pixiStats.maxTextureCount)),this._stats.update()}},{key:"addPanel",value:function(t){return this._stats.addPanel(t)}},{key:"reset",value:function(){this._pixiStats.reset()}},{key:"dom",get:function(){return this._stats.dom}}]),e}(),je=function(){function e(){t(this,e)}return n(e,null,[{key:"init",value:function(){var t=new Oe(this);this.stats=new Me(t)}},{key:"destroy",value:function(){}}]),e}();PIXI.Application.registerPlugin(je)}));
